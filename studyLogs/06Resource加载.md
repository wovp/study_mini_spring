## 加载 Resource

### 一、Resource 类的设计与实现

我们设计了一个基类 `Resource` 以及它的三个派生类 `UrlResource`、`ClassPathResource` 和 `FileSystemResource`。

- **Resource 基类**：
    - 该基类规定了一个重要的方法 `getInputStream()`。这个方法为后续的资源读取操作提供了统一的接口，无论资源是来自网络 URL、类路径还是文件系统，都可以通过此方法获取输入流，为资源的进一步处理奠定了基础。

- **派生类的具体实现**：
    - **UrlResource**：该派生类主要用于处理来自网络 URL 的资源。它继承自 `Resource` 基类，在实现 `getInputStream()` 方法时，会根据 URL 的特点和网络协议的相关规则，打开网络连接并获取输入流，从而可以读取来自网络的资源。
    - **ClassPathResource**：此派生类专注于从类路径中加载资源。在 Java 开发中，类路径是一个非常重要的概念，很多配置文件、资源文件会放在类路径下，通过该类可以方便地获取这些资源的输入流，进而对这些资源进行操作。
    - **FileSystemResource**：这个派生类主要针对文件系统中的资源。它可以将文件系统中的文件作为资源进行处理，当调用 `getInputStream()` 方法时，会根据文件的路径打开文件输入流，实现对文件资源的读取。


### 二、ResourceLoader 类的设计与实现

- **ResourceLoader 接口**：
    - 它是资源查找定位策略的抽象，旨在为资源的查找和定位提供一种统一的标准和模式。通过定义 `getResource` 方法，为不同类型的资源查找提供了一个通用的接口，使得资源的查找过程更加规范化和可扩展。

- **DefaultResourceLoader 类**：
    - 作为 `ResourceLoader` 接口的默认实现类，它承载着资源查找和定位的具体实现逻辑。

- **getResource 方法的实现细节**：
    - 在 `getResource` 方法中，根据传入的路径进行判断，确定资源的类型，具体实现如下：
        - 使用正则表达式匹配：
            - 当路径以 `classpath` 关键字开头时，会将其识别为 `ClassPathResource` 类型的资源，因为这表明该资源是位于类路径下的，从而调用相应的处理逻辑，以确保正确获取类路径中的资源。
            - 当路径直接可以被判断为 URL 时，将其识别为 `UrlResource` 类型的资源，通过相应的 URL 处理机制来获取资源。
            - 对于其他情况，将其视为 `FileSystemResource` 类型的资源，使用文件系统的相关规则和方法进行处理。


通过这样的设计，我们将资源的加载、查找和定位功能进行了合理的分层和分类。`Resource` 类及其派生类为不同来源的资源提供了统一的资源输入流获取方式，而 `ResourceLoader` 接口及其默认实现类 `DefaultResourceLoader` 为资源的查找定位提供了统一的策略和方法。这种结构使得资源的管理更加灵活和有序，既保证了资源操作的一致性，又考虑了不同资源来源的特点，为开发人员在处理各种资源时提供了极大的便利。无论是在开发桌面应用程序、Web 应用程序还是服务端应用程序时，都可以根据不同的资源需求，灵活使用相应的资源类和资源加载器，提高了代码的可维护性和可扩展性。

在实际开发中，开发人员可以根据具体的需求，对这些类进行扩展和细化，例如添加更多的资源类型或完善资源查找定位的策略，以满足日益复杂的资源处理需求。这样的架构为资源管理系统的开发和维护提供了一个清晰的框架，为后续的开发工作提供了良好的基础和扩展性，有助于提高开发效率和代码质量。